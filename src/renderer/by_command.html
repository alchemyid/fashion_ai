<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>By Command - Fashion AI Generator</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
<div class="dashboard-layout">
    <!-- Navbar will be loaded here dynamically -->

    <main class="content">
        <div class="content-header">
            <h1><i class="fas fa-terminal"></i> Generate by Command</h1>
            <p>Create stunning AI-generated content using text prompts</p>
        </div>

        <div class="form-card">
            <form id="commandForm">
                <div class="form-group">
                    <label>Example Command</label>
                    <p class="helper-text">Use this as a reference for crafting your prompt</p>

                    <div class="example-command">
                        <strong>Example En:</strong>
                        "A photorealistic portrait of an elegant young woman wearing a fashionable full-body outfit,
                        standing in an urban setting with natural lighting.
                        She is dressed in a modern, stylish ensemble featuring a tailored blazer, high-waisted trousers,
                        and designer accessories. The background shows a contemporary cityscape with a soft bokeh effect.
                        Professional fashion photography, high resolution, 8K quality. Remove all magazine text, logos,
                        captions, headlines, mastheads, barcodes, or watermarks. Object only."
                    </div>

                    <div style="height: 1rem;"></div>

                    <div class="example-command">
                        <strong>Example ID:</strong>
                        "Sebuah potret photorealistic seorang wanita muda yang elegan mengenakan pakaian full-body modis,
                        berdiri di latar perkotaan dengan pencahayaan alami.
                        Dia mengenakan ansambel modern dan penuh gaya yang menampilkan blazer berpotongan rapi (tailored blazer),
                        celana panjang berpinggang tinggi, dan aksesori desainer.
                        Latar belakang menunjukkan pemandangan kota kontemporer dengan efek bokeh yang lembut.
                        Fotografi fesyen profesional, resolusi tinggi, kualitas 8K,
                        Hapus semua teks, logo, caption, headline, masthead, barcode, atau watermark majalah. Hanya objek saja"
                    </div>
                </div>

                <div class="form-group">
                    <label for="prompt">Your Command Prompt</label>
                    <p class="helper-text">Describe what you want to generate in detail</p>
                    <textarea id="prompt" name="prompt" placeholder="Enter your detailed prompt here..." required></textarea>
                </div>

                <button type="submit" class="btn-execute">
                    <i class="fas fa-magic"></i>
                    Execute Generation
                </button>
            </form>

            <div id="loading" style="display:none;">
                <p><i class="fas fa-spinner fa-spin"></i> Generating... Please wait.</p>
            </div>

            <div id="result" style="display:none;">
                <h3>Generated Result:</h3>
                <div id="resultContent" style="padding: 1rem; background: #f5f7fa; border-radius: 8px; white-space: pre-wrap;"></div>
            </div>
        </div>
    </main>
</div>

<script src="js/navbar.js"></script>
<script>
    // Load navbar with active menu
    loadNavbar('by_command');

    // Form submission handler
    document.getElementById('commandForm').addEventListener('submit', async (e) => {
        e.preventDefault();

        const prompt = document.getElementById('prompt').value;
        const loading = document.getElementById('loading');
        const result = document.getElementById('result');
        const resultContent = document.getElementById('resultContent');

        loading.style.display = 'block';
        result.style.display = 'none';

        try {
            const response = await fetch('http://localhost:5000/api/generate-by-command', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ prompt })
            });

            const data = await response.json();

            if (data.success) {
                resultContent.textContent = data.data.result;
                result.style.display = 'block';
            } else {
                alert('Error: ' + data.error);
            }
        } catch (error) {
            alert('Failed to generate: ' + error.message);
        } finally {
            loading.style.display = 'none';
        }
    });
</script>
</body>
</html>
